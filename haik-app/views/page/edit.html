{% extends "page.layout_editor.html" %}

{% set title = page.name ~ "の編集" %}

{% block head %}
  {{ parent() }}
{% endblock %}

{% block navbar %}

<div class="nav navbar-nav navbar-right">
  <a href="{{ route('show_page', page.name) }}" class="navbar-btn haik-btn haik-btn-sm haik-btn-link haik-text-muted">キャンセル</a>
  <a href="#" class="navbar-btn haik-btn-sm  haik-btn haik-btn-link haik-text-primary">プレビュー</a>
  <button type="button" class="navbar-btn haik-btn haik-btn-sm haik-btn-success" data-edit-type="write">更新</button>
</div>

{% endblock%}

{% block content %}

  <div class="haik-container">

      {{ form_model(page, {'route': ['plugin.edit.post'], 'id': 'editForm'} ) }}

        <div class="haik-page-meta">
          {{ form_textarea('page_meta_yml', page_meta_yml, {'data-exnote':'onready', 'placeholder':'ここにページ情報'}) }}
        </div>

    <div class="haik-editor">
        {{ form_textarea('body', body, {'data-exnote':'onready', 'placeholder':'ここに本文'}) }}
        {{ form_hidden('name') }}
        {{ form_hidden('body_version') }}
      {{ form_close() }}
    </div>

  </div>

{% endblock %}

{% block script %}
  {{ parent() }}
  <script>
    $(function(){
      $("[data-edit-type=write]").on('click', function(){
        $("#editForm").submit();
      });
    });
  </script>
{% endblock %}


